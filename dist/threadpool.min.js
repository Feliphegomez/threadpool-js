!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";"undefined"!=typeof Worker&&null!==Worker||!console||console.log("Warning: Browser does not support web workers.");var n=e("./ThreadPool/ThreadPool");"function"==typeof define?define([],function(){return n}):"object"==typeof t&&(t.exports=n),"object"==typeof window&&(window.ThreadPool=n)},{"./ThreadPool/ThreadPool":4}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return!(t>e||e>t)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;a=l=u=void 0,n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,r=s,n=!0}},l=e("eventemitter3"),c=n(l),f=function(e){function t(e,r,n){if(o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.param=r,this.transferBuffers=n,this.importScripts=[],"function"==typeof e){var i=e.toString();this.scriptArgs=i.substring(i.indexOf("(")+1,i.indexOf(")")).split(","),this.scriptBody=i.substring(i.indexOf("{")+1,i.lastIndexOf("}")),this.scriptFile=null}else this.scriptArgs=null,this.scriptBody=null,this.scriptFile=e}return i(t,e),a(t,[{key:"getParameter",value:function(){return this.param}},{key:"getImportScripts",value:function(){return this.importScripts}},{key:"setImportScripts",value:function(e){this.importScripts=e}},{key:"getBuffersToTransfer",value:function(){return this.transferBuffers}},{key:"getFunction",value:function(){return this.scriptArgs?{args:this.scriptArgs,body:this.scriptBody}:null}},{key:"getScriptFile",value:function(){return this.scriptFile}},{key:"functionallyEquals",value:function(e){return e&&e instanceof t&&s(e.scriptArgs,this.scriptArgs)&&e.body===this.body&&e.scriptFile===this.scriptFile}},{key:"start",value:function(e){return this.on("start",e)}},{key:"done",value:function(e){return this.on("done",e)}},{key:"error",value:function(e){return this.on("error",e)}}]),t}(c["default"]);r["default"]=f,t.exports=r["default"]},{eventemitter3:8}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./WorkerFactory"),a=n(s),u=function(){function e(t){o(this,e),this.threadPool=t,this.factory=new a["default"]({evalWorkerUrl:t.evalWorkerUrl}),this.worker=null,this.currentJob=null,this.lastJob=null}return i(e,[{key:"terminate",value:function(){this.worker&&(this.worker.terminate(),this.worker=null)}},{key:"run",value:function(e){var t=this,r=!0,n=e.getBuffersToTransfer()||[];this.currentJob=e,this.factory.once("new",function(r){t.wireEventListeners(r,e)}),this.worker&&(this.lastJob&&this.lastJob.functionallyEquals(e)?r=!1:(this.worker.terminate(),this.worker=null)),e.emit("start");try{r?this.worker=e.getScriptFile()?this.factory.runScriptFile(e.getScriptFile(),e.getParameter(),n):this.factory.runCode(e.getFunction(),e.getParameter(),e.getImportScripts(),n):(this.wireEventListeners(this.worker,e,!0),e.getScriptFile()?this.factory.passParamsToWorkerScript(this.worker,e.getParameter(),n):this.factory.passParamsToGenericWorker(this.worker,e.getFunction(),e.getParameter(),e.getImportScripts(),n))}finally{this.factory.removeAllListeners("new")}}},{key:"wireEventListeners",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];r&&(e.removeAllListeners("message"),e.removeAllListeners("error")),e.on("message",this.handleSuccess.bind(this,t)),e.on("error",this.handleError.bind(this,t))}},{key:"handleCompletion",value:function(e){this.currentJob=null,this.lastJob=e,this.threadPool.handleThreadDone(this,e)}},{key:"handleSuccess",value:function(e,t){this.currentJob.emit("done",t.data),this.threadPool.emit("done",t.data),this.handleCompletion(e)}},{key:"handleError",value:function(e,t){this.currentJob.emit("error",t),this.threadPool.emit("error",t),this.handleCompletion(e)}}]),e}();r["default"]=u,t.exports=r["default"]},{"./WorkerFactory":5}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){setTimeout(e,0)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;a=l=u=void 0,n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,r=s,n=!0}},l=e("eventemitter3"),c=n(l),f=e("./Job"),p=n(f),h=e("./Thread"),v=n(h),d=function(e){function t(e,r){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),e=e||t.defaultSize,r=r||"",this.size=e,this.evalWorkerUrl=r,this.pendingJobs=[],this.idleThreads=[],this.activeThreads=[];for(var n=0;e>n;n++)this.idleThreads.push(new v["default"](this))}return i(t,e),a(t,[{key:"terminateAll",value:function(){var e=this.idleThreads.concat(this.activeThreads);e.forEach(function(e){e.terminate()})}},{key:"run",value:function(){for(var e,t,r,n,o,i,a,u=arguments.length,l=Array(u),c=0;u>c;c++)l[c]=arguments[c];if(l.length<1)throw new Error("run(): Too few parameters.");if("string"==typeof l[0])e=l.shift();else{if("object"==typeof l[0]&&l[0]instanceof Array&&(r=l.shift()),!(l.length>0&&"function"==typeof l[0]))throw new Error("run(): Missing obligatory thread logic function.");t=l.shift()}if(l.length>0&&"function"!=typeof l[0]&&(n=l.shift()),l.length>0&&"function"!=typeof l[0]&&(o=l.shift()),l.length>0&&"function"==typeof l[0]&&(i=l.shift()),l.length>0)throw new Error("run(): Unrecognized parameters: "+l);return e?a=new p["default"](e,n,o):(a=new p["default"](t,n,o),r&&r.length>0&&a.setImportScripts(r)),i&&a.on("done",i),this.pendingJobs.push(a),s(this.runJobs.bind(this)),a}},{key:"runJobs",value:function(){if(this.idleThreads.length>0&&this.pendingJobs.length>0){var e=this.idleThreads.shift();this.activeThreads.push(e);var t=this.pendingJobs.shift();e.run(t)}}},{key:"handleThreadDone",value:function(e){this.idleThreads.unshift(e),this.activeThreads.splice(this.activeThreads.indexOf(e),1),this.runJobs(),0===this.pendingJobs.length&&0===this.activeThreads.length&&this.emit("allDone")}},{key:"clearDone",value:function(){this.removeAllListeners("done")}},{key:"done",value:function(e){return this.on("done",e)}},{key:"error",value:function(e){return this.on("error",e)}},{key:"allDone",value:function(e){return this.once("allDone",e)}}]),t}(c["default"]);r["default"]=d,d.defaultSize=8,t.exports=r["default"]},{"./Job":2,"./Thread":3,eventemitter3:8}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=window.navigator.userAgent.indexOf("MSIE ")>-1,t=window.navigator.userAgent.indexOf("Trident/")>-1;return e||t}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;a=l=u=void 0,n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,r=s,n=!0}},l=e("eventemitter3"),c=n(l),f=e("./WorkerWrapper"),p=n(f),h=e("./../genericWorker"),v=n(h),d=v["default"].dataUri,y=v["default"].genericWorkerCode,g=function(e){function t(e){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.evalWorkerUrl=e.evalWorkerUrl}return i(t,e),a(t,[{key:"runScriptFile",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],n=new p["default"](e);return this.emit("new",n),this.passParamsToWorkerScript(n,t,r),n}},{key:"runCode",value:function(e,t){var r,n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],o=arguments.length<=3||void 0===arguments[3]?[]:arguments[3];try{r=new p["default"](d)}catch(i){if(!s())throw i;if(!this.evalWorkerUrl)throw new Error("No eval worker script set (required for IE compatibility).");r=new p["default"](this.evalWorkerUrl),r.postMessage(y)}return this.emit("new",r),this.passParamsToGenericWorker(r,e,t,n,o),r}},{key:"passParamsToWorkerScript",value:function(e,t,r){e.postMessage(t,r)}},{key:"passParamsToGenericWorker",value:function(e,t,r,n,o){e.postMessage({"function":t,importScripts:n,parameter:r},o)}}]),t}(c["default"]);r["default"]=g,t.exports=r["default"]},{"./../genericWorker":7,"./WorkerWrapper":6,eventemitter3:8}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;a=l=u=void 0,n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=i,r=s,n=!0}},u=e("eventemitter3"),l=n(u),c=function(e){function t(e){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var r=new Worker(e);this.worker=r,r.addEventListener("message",this.emit.bind(this,"message")),r.addEventListener("error",this.emit.bind(this,"error"))}return i(t,e),s(t,[{key:"postMessage",value:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];this.worker.postMessage.apply(this.worker,t)}},{key:"terminate",value:function(){return this.worker.terminate()}}]),t}(l["default"]);r["default"]=c,t.exports=r["default"]},{eventemitter3:8}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="this.onmessage = function (event) {  var fnData = event.data.function;  var scripts = event.data.importScripts;  var fn = Function.apply(null, fnData.args.concat(fnData.body));  if (importScripts && scripts.length > 0) {    importScripts.apply(null, scripts);  }  fn(event.data.parameter, function(result) {    postMessage(result);  });}",o="data:text/javascript;charset=utf-8,"+encodeURI(n),i=window.createBlobURL||window.createObjectURL;if(!i){var s=window.URL||window.webkitURL;if(!s)throw new Error("No Blob creation implementation found.");i=s.createObjectURL}if("function"==typeof BlobBuilder&&"function"==typeof i){var a=new BlobBuilder;a.append(n),o=i(a.getBlob())}else if("function"==typeof Blob&&"function"==typeof i){var u=new Blob([n],{type:"text/javascript"});o=i(u)}r["default"]={dataUri:o,genericWorkerCode:n},t.exports=r["default"]},{}],8:[function(e,t,r){"use strict";function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(){}var i="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.listeners=function(e,t){var r=i?i+e:e,n=this._events&&this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,a=new Array(s);s>o;o++)a[o]=n[o].fn;return a},o.prototype.emit=function(e,t,r,n,o,s){var a=i?i+e:e;if(!this._events||!this._events[a])return!1;var u,l,c=this._events[a],f=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,o),!0;case 6:return c.fn.call(c.context,t,r,n,o,s),!0}for(l=1,u=new Array(f-1);f>l;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,h=c.length;for(l=0;h>l;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;default:if(!u)for(p=1,u=new Array(f-1);f>p;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},o.prototype.on=function(e,t,r){var o=new n(t,r||this),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.once=function(e,t,r){var o=new n(t,r||this,!0),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events||!this._events[o])return this;var s=this._events[o],a=[];if(t)if(s.fn)(s.fn!==t||n&&!s.once||r&&s.context!==r)&&a.push(s);else for(var u=0,l=s.length;l>u;u++)(s[u].fn!==t||n&&!s[u].once||r&&s[u].context!==r)&&a.push(s[u]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[i?i+e:e]:this._events=i?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=i,"undefined"!=typeof t&&(t.exports=o)},{}]},{},[1]);