!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";"undefined"!=typeof Worker&&null!==Worker||!console||console.log("Warning: Browser does not support web workers.");var n=e("./ThreadPool/ThreadPool");"function"==typeof define?define([],function(){return n}):"object"==typeof t&&(t.exports=n),"object"==typeof window&&(window.ThreadPool=n)},{"./ThreadPool/ThreadPool":4}],2:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./utils"),a=n(s),l=function(){function e(t,r,n){if(i(this,e),this.param=r,this.transferBuffers=n,this.importScripts=[],this.callbacksStart=[],this.callbacksDone=[],this.callbacksError=[],"function"==typeof t){var o=t.toString();this.scriptArgs=o.substring(o.indexOf("(")+1,o.indexOf(")")).split(","),this.scriptBody=o.substring(o.indexOf("{")+1,o.lastIndexOf("}")),this.scriptFile=null}else this.scriptArgs=null,this.scriptBody=null,this.scriptFile=t}return o(e,[{key:"getParameter",value:function(){return this.param}},{key:"getImportScripts",value:function(){return this.importScripts}},{key:"setImportScripts",value:function(e){this.importScripts=e}},{key:"getBuffersToTransfer",value:function(){return this.transferBuffers}},{key:"getFunction",value:function(){return this.scriptArgs?{args:this.scriptArgs,body:this.scriptBody}:null}},{key:"getScriptFile",value:function(){return this.scriptFile}},{key:"functionallyEquals",value:function(t){return t&&t instanceof e&&a.arrayEquals(t.scriptArgs,this.scriptArgs)&&t.body===this.body&&t.scriptFile===this.scriptFile}},{key:"triggerStart",value:function(){a.callListeners(this.callbacksStart,[])}},{key:"triggerDone",value:function(e){a.callListeners(this.callbacksDone,[e])}},{key:"triggerError",value:function(e){a.callListeners(this.callbacksError,[e])}},{key:"start",value:function(e){return a.addListener(this.callbacksStart,e),this}},{key:"done",value:function(e){return a.addListener(this.callbacksDone,e),this}},{key:"error",value:function(e){return a.addListener(this.callbacksError,e),this}}]),e}();r["default"]=l,t.exports=r["default"]},{"./utils":5}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./../genericWorker"),a=n(s),l=a["default"].dataUri,u=a["default"].genericWorkerCode,c=function(){function e(t){i(this,e),this.threadPool=t,this.worker=null,this.currentJob=null,this.lastJob=null}return o(e,[{key:"terminate",value:function(){this.worker&&(this.worker.terminate(),this.worker=null)}},{key:"run",value:function(e){var t=!0,r=e.getBuffersToTransfer()||[];if(this.currentJob=e,this.worker&&(this.lastJob&&this.lastJob.functionallyEquals(e)?t=!1:(this.worker.terminate(),this.worker=null)),e.triggerStart(),e.getScriptFile())t&&(this.worker=new Worker(e.getScriptFile()),this.wireEventListeners(e)),this.worker.postMessage(e.getParameter(),r);else{if(t){try{this.worker=new Worker(l)}catch(n){var i=window.navigator.userAgent.indexOf("MSIE ")>-1,o=window.navigator.userAgent.indexOf("Trident/")>-1;if(!i&&!o)throw n;if(!this.threadPool.evalWorkerUrl)throw new Error("No eval worker script set (required for IE compatibility).");this.worker=new Worker(this.threadPool.evalWorkerUrl),this.worker.postMessage(u)}this.wireEventListeners(e)}this.worker.postMessage({"function":e.getFunction(),importScripts:e.getImportScripts(),parameter:e.getParameter()},r)}}},{key:"wireEventListeners",value:function(e){this.worker.addEventListener("message",this.handleSuccess.bind(this,e),!1),this.worker.addEventListener("error",this.handleError.bind(this,e),!1)}},{key:"handleCompletion",value:function(e){this.currentJob=null,this.lastJob=e,this.threadPool.onThreadDone(this)}},{key:"handleSuccess",value:function(e,t){this.currentJob.triggerDone(t.data),this.threadPool.triggerDone(t.data),this.handleCompletion(e)}},{key:"handleError",value:function(e,t){this.currentJob.triggerError(t),this.threadPool.triggerError(t),this.handleCompletion(e)}}]),e}();r["default"]=c,t.exports=r["default"]},{"./../genericWorker":6}],4:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./Job"),l=i(a),u=e("./Thread"),c=i(u),f=e("./utils"),h=n(f),d=function(){function e(t,r){o(this,e),t=t||e.defaultSize,r=r||"",this.size=t,this.evalWorkerUrl=r,this.pendingJobs=[],this.idleThreads=[],this.activeThreads=[],this.callbacksDone=[],this.callbacksError=[],this.callbacksAllDone=[];for(var n=0;t>n;n++)this.idleThreads.push(new c["default"](this))}return s(e,[{key:"terminateAll",value:function(){var e=this.idleThreads.concat(this.activeThreads);e.forEach(function(e){e.terminate()})}},{key:"run",value:function(){for(var e,t,r,n,i,o,s,a=arguments.length,u=Array(a),c=0;a>c;c++)u[c]=arguments[c];if(u.length<1)throw new Error("run(): Too few parameters.");if("string"==typeof u[0])e=u.shift();else{if("object"==typeof u[0]&&u[0]instanceof Array&&(r=u.shift()),!(u.length>0&&"function"==typeof u[0]))throw new Error("run(): Missing obligatory thread logic function.");t=u.shift()}if(u.length>0&&"function"!=typeof u[0]&&(n=u.shift()),u.length>0&&"function"!=typeof u[0]&&(i=u.shift()),u.length>0&&"function"==typeof u[0]&&(o=u.shift()),u.length>0)throw new Error("run(): Unrecognized parameters: "+u);return e?s=new l["default"](e,n,i):(s=new l["default"](t,n,i),r&&r.length>0&&s.setImportScripts(r)),s.done(this.jobIsDone.bind(this,s)),o&&s.done(o),this.pendingJobs.push(s),h.runDeferred(this.runJobs.bind(this)),s}},{key:"runJobs",value:function(){if(this.idleThreads.length>0&&this.pendingJobs.length>0){var e=this.idleThreads.shift();this.activeThreads.push(e);var t=this.pendingJobs.shift();e.run(t)}}},{key:"onThreadDone",value:function(e){this.idleThreads.unshift(e),this.activeThreads.splice(this.activeThreads.indexOf(e),1),this.runJobs()}},{key:"triggerDone",value:function(e){h.callListeners(this.callbacksDone,[e])}},{key:"triggerError",value:function(e){h.callListeners(this.callbacksError,[e])}},{key:"clearDone",value:function(){this.callbacksDone=[]}},{key:"jobIsDone",value:function(){0===this.pendingJobs.length&&(h.callListeners(this.callbacksAllDone,[]),this.callbacksAllDone=[])}},{key:"done",value:function(e){return h.addListener(this.callbacksDone,e),this}},{key:"error",value:function(e){return h.addListener(this.callbacksError,e),this}},{key:"allDone",value:function(e){return h.addListener(this.callbacksAllDone,e),this}}]),e}();r["default"]=d,d.defaultSize=8,t.exports=r["default"]},{"./Job":2,"./Thread":3,"./utils":5}],5:[function(e,t,r){"use strict";function n(e,t){return!(t>e||e>t)}function i(e,t){if("function"!=typeof t)throw new Error("Expected callback function as parameter.");-1===e.indexOf(t)&&e.push(t)}function o(e,t){e.forEach(function(e){e.apply(null,t)})}function s(e){setTimeout(e,0)}Object.defineProperty(r,"__esModule",{value:!0}),r.arrayEquals=n,r.addListener=i,r.callListeners=o,r.runDeferred=s},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="this.onmessage = function (event) {  var fnData = event.data.function;  var scripts = event.data.importScripts;  var fn = Function.apply(null, fnData.args.concat(fnData.body));  if (importScripts && scripts.length > 0) {    importScripts.apply(null, scripts);  }  fn(event.data.parameter, function(result) {    postMessage(result);  });}",i="data:text/javascript;charset=utf-8,"+encodeURI(n),o=window.createBlobURL||window.createObjectURL;if(!o){var s=window.URL||window.webkitURL;if(!s)throw new Error("No Blob creation implementation found.");o=s.createObjectURL}if("function"==typeof BlobBuilder&&"function"==typeof o){var a=new BlobBuilder;a.append(n),i=o(a.getBlob())}else if("function"==typeof Blob&&"function"==typeof o){var l=new Blob([n],{type:"text/javascript"});i=o(l)}r["default"]={dataUri:i,genericWorkerCode:n},t.exports=r["default"]},{}]},{},[1]);