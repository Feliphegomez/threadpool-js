!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";"undefined"!=typeof Worker&&null!==Worker||!console||console.log("Warning: Browser does not support web workers.");var n=e("./ThreadPool/ThreadPool");"function"==typeof define?define([],function(){return n}):"object"==typeof t&&(t.exports=n),"object"==typeof window&&(window.ThreadPool=n)},{"./ThreadPool/ThreadPool":4}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return!(t>e||e>t)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;a=f=u=void 0,n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var f=Object.getPrototypeOf(o);if(null===f)return void 0;e=f,t=i,r=s,n=!0}},f=e("eventemitter3"),l=n(f),c=function(e){function t(e,r,n){if(o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.param=r,this.transferBuffers=n,this.importScripts=[],"function"==typeof e){var i=e.toString();this.scriptArgs=i.substring(i.indexOf("(")+1,i.indexOf(")")).split(","),this.scriptBody=i.substring(i.indexOf("{")+1,i.lastIndexOf("}")),this.scriptFile=null}else this.scriptArgs=null,this.scriptBody=null,this.scriptFile=e}return i(t,e),a(t,[{key:"getParameter",value:function(){return this.param}},{key:"getImportScripts",value:function(){return this.importScripts}},{key:"setImportScripts",value:function(e){this.importScripts=e}},{key:"getBuffersToTransfer",value:function(){return this.transferBuffers}},{key:"getFunction",value:function(){return this.scriptArgs?{args:this.scriptArgs,body:this.scriptBody}:null}},{key:"getScriptFile",value:function(){return this.scriptFile}},{key:"functionallyEquals",value:function(e){return e&&e instanceof t&&s(e.scriptArgs,this.scriptArgs)&&e.body===this.body&&e.scriptFile===this.scriptFile}},{key:"start",value:function(e){return this.on("start",e)}},{key:"done",value:function(e){return this.on("done",e)}},{key:"error",value:function(e){return this.on("error",e)}}]),t}(l["default"]);r["default"]=c,t.exports=r["default"]},{eventemitter3:6}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./../genericWorker"),a=n(s),u=a["default"].dataUri,f=a["default"].genericWorkerCode,l=function(){function e(t){o(this,e),this.threadPool=t,this.worker=null,this.currentJob=null,this.lastJob=null}return i(e,[{key:"terminate",value:function(){this.worker&&(this.worker.terminate(),this.worker=null)}},{key:"run",value:function(e){var t=!0,r=e.getBuffersToTransfer()||[];if(this.currentJob=e,this.worker&&(this.lastJob&&this.lastJob.functionallyEquals(e)?t=!1:(this.worker.terminate(),this.worker=null)),e.emit("start"),e.getScriptFile())t&&(this.worker=new Worker(e.getScriptFile()),this.wireEventListeners(e)),this.worker.postMessage(e.getParameter(),r);else{if(t){try{this.worker=new Worker(u)}catch(n){var o=window.navigator.userAgent.indexOf("MSIE ")>-1,i=window.navigator.userAgent.indexOf("Trident/")>-1;if(!o&&!i)throw n;if(!this.threadPool.evalWorkerUrl)throw new Error("No eval worker script set (required for IE compatibility).");this.worker=new Worker(this.threadPool.evalWorkerUrl),this.worker.postMessage(f)}this.wireEventListeners(e)}this.worker.postMessage({"function":e.getFunction(),importScripts:e.getImportScripts(),parameter:e.getParameter()},r)}}},{key:"wireEventListeners",value:function(e){this.worker.addEventListener("message",this.handleSuccess.bind(this,e),!1),this.worker.addEventListener("error",this.handleError.bind(this,e),!1)}},{key:"handleCompletion",value:function(e){this.currentJob=null,this.lastJob=e,this.threadPool.onThreadDone(this)}},{key:"handleSuccess",value:function(e,t){this.currentJob.emit("done",t.data),this.threadPool.emit("done",t.data),this.handleCompletion(e)}},{key:"handleError",value:function(e,t){this.currentJob.emit("error",t),this.threadPool.emit("error",t),this.handleCompletion(e)}}]),e}();r["default"]=l,t.exports=r["default"]},{"./../genericWorker":5}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){setTimeout(e,0)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(e,t,r){for(var n=!0;n;){var o=e,i=t,s=r;a=f=u=void 0,n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var f=Object.getPrototypeOf(o);if(null===f)return void 0;e=f,t=i,r=s,n=!0}},f=e("eventemitter3"),l=n(f),c=e("./Job"),h=n(c),p=e("./Thread"),d=n(p),v=function(e){function t(e,r){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),e=e||t.defaultSize,r=r||"",this.size=e,this.evalWorkerUrl=r,this.pendingJobs=[],this.idleThreads=[],this.activeThreads=[];for(var n=0;e>n;n++)this.idleThreads.push(new d["default"](this))}return i(t,e),a(t,[{key:"terminateAll",value:function(){var e=this.idleThreads.concat(this.activeThreads);e.forEach(function(e){e.terminate()})}},{key:"run",value:function(){for(var e,t,r,n,o,i,a,u=arguments.length,f=Array(u),l=0;u>l;l++)f[l]=arguments[l];if(f.length<1)throw new Error("run(): Too few parameters.");if("string"==typeof f[0])e=f.shift();else{if("object"==typeof f[0]&&f[0]instanceof Array&&(r=f.shift()),!(f.length>0&&"function"==typeof f[0]))throw new Error("run(): Missing obligatory thread logic function.");t=f.shift()}if(f.length>0&&"function"!=typeof f[0]&&(n=f.shift()),f.length>0&&"function"!=typeof f[0]&&(o=f.shift()),f.length>0&&"function"==typeof f[0]&&(i=f.shift()),f.length>0)throw new Error("run(): Unrecognized parameters: "+f);return e?a=new h["default"](e,n,o):(a=new h["default"](t,n,o),r&&r.length>0&&a.setImportScripts(r)),a.done(this.jobIsDone.bind(this,a)),i&&a.done(i),this.pendingJobs.push(a),s(this.runJobs.bind(this)),a}},{key:"runJobs",value:function(){if(this.idleThreads.length>0&&this.pendingJobs.length>0){var e=this.idleThreads.shift();this.activeThreads.push(e);var t=this.pendingJobs.shift();e.run(t)}}},{key:"onThreadDone",value:function(e){this.idleThreads.unshift(e),this.activeThreads.splice(this.activeThreads.indexOf(e),1),this.runJobs()}},{key:"clearDone",value:function(){this.removeAllListeners("done")}},{key:"jobIsDone",value:function(){0===this.pendingJobs.length&&this.emit("allDone")}},{key:"done",value:function(e){return this.on("done",e)}},{key:"error",value:function(e){return this.on("error",e)}},{key:"allDone",value:function(e){return this.once("allDone",e)}}]),t}(l["default"]);r["default"]=v,v.defaultSize=8,t.exports=r["default"]},{"./Job":2,"./Thread":3,eventemitter3:6}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="this.onmessage = function (event) {  var fnData = event.data.function;  var scripts = event.data.importScripts;  var fn = Function.apply(null, fnData.args.concat(fnData.body));  if (importScripts && scripts.length > 0) {    importScripts.apply(null, scripts);  }  fn(event.data.parameter, function(result) {    postMessage(result);  });}",o="data:text/javascript;charset=utf-8,"+encodeURI(n),i=window.createBlobURL||window.createObjectURL;if(!i){var s=window.URL||window.webkitURL;if(!s)throw new Error("No Blob creation implementation found.");i=s.createObjectURL}if("function"==typeof BlobBuilder&&"function"==typeof i){var a=new BlobBuilder;a.append(n),o=i(a.getBlob())}else if("function"==typeof Blob&&"function"==typeof i){var u=new Blob([n],{type:"text/javascript"});o=i(u)}r["default"]={dataUri:o,genericWorkerCode:n},t.exports=r["default"]},{}],6:[function(e,t,r){"use strict";function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(){}var i="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.listeners=function(e,t){var r=i?i+e:e,n=this._events&&this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,a=new Array(s);s>o;o++)a[o]=n[o].fn;return a},o.prototype.emit=function(e,t,r,n,o,s){var a=i?i+e:e;if(!this._events||!this._events[a])return!1;var u,f,l=this._events[a],c=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,o),!0;case 6:return l.fn.call(l.context,t,r,n,o,s),!0}for(f=1,u=new Array(c-1);c>f;f++)u[f-1]=arguments[f];l.fn.apply(l.context,u)}else{var h,p=l.length;for(f=0;p>f;f++)switch(l[f].once&&this.removeListener(e,l[f].fn,void 0,!0),c){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,t);break;case 3:l[f].fn.call(l[f].context,t,r);break;default:if(!u)for(h=1,u=new Array(c-1);c>h;h++)u[h-1]=arguments[h];l[f].fn.apply(l[f].context,u)}}return!0},o.prototype.on=function(e,t,r){var o=new n(t,r||this),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.once=function(e,t,r){var o=new n(t,r||this,!0),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events||!this._events[o])return this;var s=this._events[o],a=[];if(t)if(s.fn)(s.fn!==t||n&&!s.once||r&&s.context!==r)&&a.push(s);else for(var u=0,f=s.length;f>u;u++)(s[u].fn!==t||n&&!s[u].once||r&&s[u].context!==r)&&a.push(s[u]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[i?i+e:e]:this._events=i?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=i,"undefined"!=typeof t&&(t.exports=o)},{}]},{},[1]);